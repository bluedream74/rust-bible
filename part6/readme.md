# inject-demo
    rust依赖注入

# 为什么要有依赖注入
我见过太多的项目，在前期设计的设计时候，由于设计者没有思考，一味地去完成需求功能，而忽略了思考，没有对整个
项目进行合理抽象和架构设计，导致全局变量在项目中漫天飞，每个模块之间相互依赖，比如说A依赖B,B依赖C，C依赖D,
D又反过来依赖A,B等等，这种设计在项目中通篇都是全局变量，到处散落，就导致了如下缺点：
- 全局变量的组件设计，实例不可重入，不能进行多个实例初始化使用；
- 全局变量的泛滥，导致单元测试极其难做，覆盖率上不去，导致隐藏的bug被发布到线上去；
- 全局变量的项目，组件依赖高，无法拓展和维护，等到项目大了后，由于历史包袱，没法推动重构；

对于依赖注入，控制反转的思想，业界称为ioc编程；
+ 在其他的语言中也有依赖注入的思想。比如说php语言，我接触过phalcon框架；
比如golang项目中，常用的依赖注入框架，有uber dig,facebook inject,google wire框架，都在做一件事，模块化编程；
+ 将项目中大量的全局变量，通过依赖注入的方式，使得每个组件的依赖关系进行解耦合，便于项目组件后续更好的维护和拓展；
+ 另一个方面，在做项目代码单元测试，能将覆盖率提升上去；还有一个点，代码code review的时候，团队中成员能一看明白各个组件的依赖关系；
+ 这里借用《架构整洁之道》中的一句话，底层策略需要指向高层策略，不能反过来；
+ 说的简单一点，就是底层实现部分，需要指向上层接口设计，这种思想在《unix编程艺术》中，也处处提到这个（模块化编程）如何解耦，方便维护和拓展；
+ 其目的就是更好地进行组件抽象设计，降低组件之间的复杂度，其易用性、可维护性、可拓展性都得到保证，从而保证整个服务的稳定性。

# rust依赖注入工具
https://github.com/AzureMarker/shaku
